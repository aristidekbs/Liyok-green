{% extends 'bases/base1.html' %}

{% load static %}

{% block content %}
<section class="breadcrumb-section">
    <div class="container-fluid">
        <div class="row g-0">
            <div class="col-xl-6 col-lg-6">
                <div class="breadcrumb-content" style="background-image: url(assets/img/bg/breadcrumb-bg.webp);">
                    <div class="breadcrumb-nav" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="200">
                        <ul>
                            <li><a href='{% url "index" %}'>Home</a></li>
                            <li><a href='{% url "services" %}'>Service</a></li>
                            <li><a href="{% url 'services_detail' service.slug %}">{{ service.name }}</a></li>
                        </ul>
                    </div>
                    <div class="breadcrumb-title" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="400">
                        <h2>{{ service.name }}</h2>
                    </div>
                    <div class="shape-1">
                        <img src="{% static 'assets/img/shapes/shape-1.webp' %}" alt="shape">
                    </div>
                </div>
            </div>
            <div class="col-xl-6 col-lg-6 d-none d-lg-block">
                <div class="breadcrumb-thumb">
                    <img src="{{ service.main_image.url }}" alt="thumb">
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb-section end -->

<!-- services-details-section start -->
<section class="services-details-section p-t-120 p-b-250 p-t-lg-80 p-t-md-80 p-t-xs-60">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="details-layout-wrap">
                    <!-- COLONNE PRINCIPALE (CONTENU) -->
                    <div class="details-content" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="600">

                        <!-- Image Principale (Grande image en haut) -->
                        <div class="thumb-wrap m-b-50">
                            {% if service.main_image %}
                            <img src="{{ service.secondary_image.url }}" alt="{{ service.name }}" />
                            {% else %}
                            <img src="https://placehold.co/800x400?text=No+Image" alt="placeholder">
                            {% endif %}
                        </div>

                        <!-- 1. Contenu d'Introduction (CKEditor) -->
                        <div class="detail-text m-b-30">
                            {{ service.intro_content|safe }}
                        </div>

                        <!-- 2. Image Secondaire (Si elle existe) -->
                        {% if service.secondary_image %}
                        <div class="thumb-wrap m-b-30">
                            <img src="" alt="" />
                        </div>
                        {% endif %}

                        <!-- 3. Contenu Détaillé (CKEditor) -->
                        <div class="detail-text m-b-25">
                            {{ service.details_content|safe }}
                        </div>

                        <!-- LE CAROUSEL DYNAMIQUE -->
                        {% if service.carousel_images.all %}
                        <div class="gallery-slider-active m-b-50">
                            <div class="swiper">
                                <div class="swiper-wrapper">
                                    {% for item in service.carousel_images.all %}
                                    <div class="swiper-slide">
                                        <div class="banner-slide-wrap">
                                            <div class="thumb">
                                                <img src="{{ item.image.url }}" alt="Slide {{ forloop.counter }}">
                                            </div>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="gallery-pagination-wrap">
                                <div class="gallery-pagination"></div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Zone de citation / Témoignage (Statique ou à rendre dynamique plus tard) -->
                        <div class="testimonial-wrap m-b-60">
                            <div class="icon">
                                <img src="{% static 'assets/img/icons/icon-17.svg' %}" alt="icon">
                            </div>
                            <p class="review">
                                Contactez-nous pour en savoir plus sur le service "{{ service.name }}".
                                Nous sommes disponibles pour répondre à toutes vos questions.
                            </p>
                            <div class="author">
                                <h3>Support Client</h3>
                            </div>
                        </div>

                        <!-- 4. Contenu Supplémentaire / Conclusion (CKEditor) -->
                        {% if service.extra_content %}
                        <div class="details-title m-b-15">
                            <h2>Plus d'informations</h2>
                        </div>
                        <div class="detail-text m-b-20">
                            {{ service.extra_content|safe }}
                        </div>
                        {% endif %}
                    </div>

                    <!-- SIDEBAR (LISTE DES AUTRES SERVICES) -->
                    <div class="detail-sidebar" data-aos="fade-up" data-aos-duration="1000" data-aos-delay="800">
                        <div class="detail-sidebar-inner">
                            <div class="s-widget-wrap m-b-30">
                                <div class="w-title">
                                    <h3>Liste des Services</h3>
                                    <div class="bar-wrap">
                                        <div class="bar-1"></div>
                                        <div class="bar-2"></div>
                                    </div>
                                </div>
                                <div class="detail-list">
                                    <ul>
                                        <!-- Boucle sur tous les services -->
                                        {% for s in services_list %}
                                        <li>
                                            <!-- Ajout de la classe 'active' si c'est le service courant -->
                                            <a href="{% url 'services_detail' s.slug %}"
                                                class="{% if s.id == service.id %}active-link{% endif %}">
                                                {{ s.name }}
                                                <span class="icon"><i class="fa-regular fa-arrow-up-right"></i></span>
                                            </a>
                                        </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- FIN SIDEBAR -->

                </div>
            </div>
        </div>
    </div>
    <div class="d-shape-1">
        <img src="{% static 'assets/img/shapes/shape-31.webp' %}" alt="shape-31" />
    </div>
</section>
<!-- services-details-section end -->

<!-- contact-info-section start -->
<section class="contact-info-section">
    <div class="container">
        <div class="row">
            <div class="col-xl-12">
                <div class="contact-info-layout">
                    <a href="mailto:support.econest@gmail.com" class="contact-info active">
                        <div class="icon-wrap">
                            <div class="icon-shape"></div>
                            <div class="icon">
                                <i class="fa-solid fa-paper-plane"></i>
                            </div>
                        </div>
                        <h3>support.econest@gmail.com</h3>
                        <p>Send a Email</p>
                    </a>
                    <a href="tel:+70264566579" class="contact-info">
                        <div class="icon-wrap">
                            <div class="icon-shape"></div>
                            <div class="icon">
                                <i class="fa-solid fa-phone-arrow-up-right"></i>
                            </div>
                        </div>
                        <h3>+70 264 566 579</h3>
                        <p>Any Time Call Us</p>
                    </a>
                    <a href="services-details.html#" class="contact-info">
                        <div class="icon-wrap">
                            <div class="icon-shape"></div>
                            <div class="icon">
                                <i class="fa-solid fa-location-dot"></i>
                            </div>
                        </div>
                        <h3></h3>
                        <p>Our Address</p>
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}
